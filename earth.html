<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Earth - VM VulnHub: Easy</title>
  <link rel="stylesheet" href="/assets/css/custom.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: auto;
      padding: 20px;
      line-height: 1.6;
      background-color: #121212;
      color: #e0e0e0;
    }
    h1, h2, h3 {
      color: #00adb5;
      text-align: center;
    }
    p {
      margin-bottom: 16px;
      font-size: 16px;
      text-align: justify;
    }
    code {
      background-color: #1e1e1e;
      padding: 2px 4px;
      border-radius: 4px;
      color: #00ff00;
      font-family: monospace;
    }
    a {
      color: #00adb5;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    img {
      max-width: 100%;
      border-radius: 8px;
      margin: 10px 0;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    header {
      margin-bottom: 30px;
    }
    .banner {
      width: 100%;
      max-height: 300px;
      object-fit: contain;
      margin: 0 auto 30px auto;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,173,181,0.8);
    }
  </style>
</head>
<body>

<header>
  <h1>Earthâ€Š-â€ŠVM VulnHub: Easy</h1>
</header>

<p>Earth Ã© uma das trÃªs Virtual Machines CTF criadas por SirFlash. O objetivo Ã© obter o acesso root e capturar a flag.</p>

<p>VocÃª pode fazer o download neste link: <a href="https://www.vulnhub.com/series/the-planets,362/" target="_blank">https://www.vulnhub.com/series/the-planets,362/</a></p>

<p>Agora vou detalhar o passo a passo de como foi o caminho atÃ© chegar na tÃ£o desejada bandeira (flag).</p>

<h2>IntroduÃ§Ã£o</h2>

<p>Ligue a VM Earth e tambÃ©m ligue seu Kali Linux. O mÃ¡ximo que vocÃª vai obter da mÃ¡quina Earth Ã© a pÃ¡gina de login que se apresentarÃ¡ Ã  vocÃª dessa maneira:</p>

<img src="https://cdn-images-1.medium.com/max/800/1*EBurhjmtGiniH2WwE58DfA.png" alt="Login VM Earth">

<h2>2. EnumeraÃ§Ã£o de Rede</h2>

<p>Entre no seu terminal Kali e vamos fazer um scan na rede para encontrar quais IPs estÃ£o conectados em sua rede local. A VM Earth e o Kali Linux precisam estar em Modo Bridge ou Host-Only para que possam se comunicar, caso contrÃ¡rio, nada feito.</p>

<p>Deduzo que vocÃª jÃ¡ saiba disso, mas caso nÃ£o saiba, dÃª uma estudada sobre essas conexÃµes de rede antes de tentar um scan.</p>

<p>Pois bem, no seu terminal como root, digite: <code>netdiscover</code>.</p>

<p>O netdiscover Ã© uma ferramenta de reconhecimento de rede para descobrir endereÃ§os IP ativos, endereÃ§os MAC e fabricantes de dispositivos conectados a uma rede local (LAN).</p>

<img src="https://cdn-images-1.medium.com/max/800/1*xRGHKv1kN-r_DEF-3Dat0g.png" alt="Resultado Netdiscover">

<p>Esse Ã© o resultado da pesquisa, tenho cinco IPs conectados na minha rede LAN e preciso descobrir qual Ã© a VM. Aqui vai uma dica que vai facilitar sua vida:</p>

<p>O prefixo <code>08:00:27</code> Ã© um Organizationally Unique Identifier (OUI) da fabricante Oracle Corporation, que Ã© quem faz o VirtualBox. Ou seja, como vocÃª estÃ¡ rodando a VM Earth no VirtualBox e o MAC <code>08:00:27</code> Ã© do Oracle / VirtualBox, logo vocÃª sabe que esse Ã© o IP que vocÃª vai explorar e tentar invadir.</p>

<h2>3. EnumeraÃ§Ã£o de ServiÃ§os</h2>

<p>Agora Ã© preciso saber quais serviÃ§os estÃ£o rodando e em quais portas no IP da sua VM Earth. Essa etapa Ã© fundamental para poder direcionar suas tentativas de ataques.</p>

<p>No seu terminal Kali, execute o seguinte comando: <code>nmap -sC -sV -p- -Pn &lt;SEU_IP&gt;</code></p>

<p>Esse foi o resultado:</p>
  
<img src="https://cdn-images-1.medium.com/max/800/1*jLhOnDgj6R3uAnLRsYbBbQ.png" alt="Resultado Nmap">

<p>Analisando o resultado percebemos que trÃªs portas estÃ£o abertas. Sendo elas:</p>

<ul>
  <li>22/tcpâ€Š-â€ŠSSHâ€Š-â€ŠOpenSSH 8.6</li>
  <li>80/tcpâ€Š-â€ŠHTTPâ€Š-â€ŠApache 2.4.51</li>
  <li>443/tcpâ€Š-â€ŠSSL/HTTPSâ€Š-â€ŠApache 2.4.51</li>
</ul>

<p>TambÃ©m percebemos que existem dois domÃ­nios scaneados:</p>

<ul>
  <li><a href="http://earth.local">http://earth.local</a></li>
  <li><a href="https://terratest.earth.local">https://terratest.earth.local</a></li>
</ul>

<p>Aqui preciso explicar um pouco sobre o HTTP e HTTPS desses domÃ­nios porque na minha primeira tentativa acabei sofrendo um pouco pela minha falta de atenÃ§Ã£o.</p>

<p>Os dois domÃ­nios (<code>earth.local</code> e <code>terratest.earth.local</code>) estÃ£o configurados como Virtual Hosts no Apache, significando que o servidor usa o nome do host (Host Header) + protocolo (HTTP ou HTTPS) para entregar o conteÃºdo correto. Ou seja, o Apache pode ter conteÃºdo diferente para o mesmo domÃ­nio dependendo se for HTTP ou HTTPS.</p>

<h2>4. ExploraÃ§Ã£o WEB</h2>

<p>Agora que vocÃª descobriu dois domÃ­nios durante o scan com o Nmap, Ã© hora de investigar o que existe neles.</p>

<p>Se vocÃª abrir o navegador dentro do Kali Linux e tentar acessar:</p>

<ul>
  <li><code>http://earth.local</code></li>
  <li><code>https://terratest.earth.local</code></li>
</ul>

<p>Provavelmente vai se deparar com um erro como <strong>"Bad Request"</strong>, ou o navegador pode simplesmente nÃ£o conseguir se conectar.<br>
Mas... <strong>por quÃª?</strong></p>

<p>Quando vocÃª digita um domÃ­nio como <code>earth.local</code> no navegador, o Kali precisa <strong>resolver esse nome para um endereÃ§o IP</strong>, processo que acontece atravÃ©s do <strong>DNS (Domain Name System)</strong>.</p>

<p>PorÃ©m, como estamos trabalhando em um <strong>ambiente de laboratÃ³rio sem um servidor DNS real</strong>, o Kali <strong>nÃ£o sabe para qual IP esses domÃ­nios devem apontar</strong>.</p>
  
<p>O Kali (assim como outros sistemas Linux) possui um arquivo chamado <code>/etc/hosts</code>.<br>
Esse arquivo funciona como uma <strong>tabela de resoluÃ§Ã£o de nomes local</strong>, que o sistema consulta <strong>antes de tentar acessar um servidor DNS externo</strong>.</p>

<p><strong>â¡ï¸Ã‰ como dizer manualmente ao sistema:</strong></p>

<blockquote>
  Quando alguÃ©m tentar acessar o domÃ­nio <code>earth.local</code>, envie o trÃ¡fego para o IP <code>192.168.18.57</code>.
</blockquote>

<p><strong>â¡ï¸Exemplo PrÃ¡tico:</strong></p>

<p>Suponha que o IP da sua mÃ¡quina-alvo seja:</p>

<pre>
192.168.18.57
</pre>

<p>VocÃª deve adicionar a seguinte linha ao arquivo <code>/etc/hosts</code>:</p>

<pre>
192.168.18.57   earth.local terratest.earth.local
</pre>

<p><strong>Resultado esperado apÃ³s a configuraÃ§Ã£o:</strong></p>

<p>Depois de salvar, ao tentar acessar os domÃ­nios no navegador novamente, o Kali vai <strong>direcionar o trÃ¡fego para o IP correto</strong>, e vocÃª jÃ¡ poderÃ¡ explorar o conteÃºdo dos sites de teste hospedados nesses domÃ­nios.</p>

<p>Agora vocÃª pode abrir seu navegador e digitar os domÃ­nios com tranquilidade que vocÃª verÃ¡ o seguinte:</p>

<img src="https://cdn-images-1.medium.com/max/1000/1*t6WsyxJr6JhYSDl8vOQ3eQ.png" alt="Resultado Earth.local">

  <p>A pÃ¡gina inicial do Earth Ã© uma imagem do planeta Terra, com um campo para enviar uma mensagem para a Terra e outro campo
  escrito Message Key que explicarei mais tarde a funcionalidade. E no fim da pÃ¡gina hÃ¡ trÃªs linhas com nÃºmeros extensos, tambÃ©m 
  mais tarde voltaremos neles.</p>

  <p>Agora vamos ver o que o domÃ­nio do terratest nos retorna:</p>

  <img src="https://cdn-images-1.medium.com/max/1000/1*sBw8WmXA9W7dG94Fu6gCGA.png" alt="Resultado terratest">

  <p>A Ãºnica coisa que temos da pÃ¡gina inicial do terratest Ã© uma linda mensagem escrita: <strong>Test site, please ignore.</strong>
  Com qual desses dois sites vocÃª entraria e tomaria uma xÃ­cara de chÃ¡?ğŸµ</p>

  <p>Vamos comeÃ§ar no earth.local rodando o <span style="color:orange;">Gobuster.ğŸ•µğŸ¼â€â™‚ï¸</span>
  O Gobuster Ã© uma ferramenta de forÃ§a bruta de diretÃ³rios, arquivos ou subdomÃ­nios em um servidor web.
  Ele vai nos ajudar a descobrir pastas ocultas, arquivos sensÃ­veis e atÃ© pontos de entrada nÃ£o listados
  no site, que o navegador normal nÃ£o mostraria.</p>

   <p><strong>Vou dar um exemplo de uso do gobuster no </strong><code>earth.local</code></p>

<p>Quando vocÃª acessa <code>http://earth.local</code> no navegador, vocÃª sÃ³ vÃª a <strong>pÃ¡gina inicial</strong> (o que o servidor nos mostra por padrÃ£o).
  Mas pode haver <strong>vÃ¡rias outras pastas ou arquivos escondidos</strong> por trÃ¡s desse domÃ­nio.</p>

<p><strong>â¡ï¸Exemplos de coisas que o Gobuster pode encontrar:</strong></p>

<table border="1" cellspacing="0" cellpadding="5">
  <tr>
    <th>Tipo</th>
    <th>Exemplos</th>
  </tr>
  <tr>
    <td>DiretÃ³rios ocultos</td>
    <td>/admin, /backup, /test, /uploads</td>
  </tr>
  <tr>
    <td>Arquivos sensÃ­veis</td>
    <td>config.php, db_backup.zip, .git/, index.old.html</td>
  </tr>
</table>

<p><strong>â¡ï¸Exemplo de comando Gobuster no <code>earth.local</code>:</strong></p>

<pre><code>gobuster dir -u http://earth.local -w /usr/share/wordlists/dirb/common.txt</code></pre>

<h3>ExplicaÃ§Ã£o:</h3>

<ul>
  <li><strong>dir</strong> â†’ Modo de forÃ§a bruta em diretÃ³rios.</li>
  <li><strong>-u http://earth.local</strong> â†’ URL alvo.</li>
  <li><strong>-w</strong> â†’ Caminho da <em>wordlist</em> que o Gobuster vai usar.</li>
</ul>


  

  
  
  
</body>
</html>
